{% extends "medd/base.html" %}
{% load tags %}
{% block title %}{{ object }} â€¹ {{ object.model.verbose_name|capfirst }}{% endblock %}

{% block content %}
<p class="breadcrumbs">
<a href="{{ site_url }}">Home</a> / {% if 'lookup' in object.url %}<span class="muted">Lookup:&nbsp;</span>
    {% endif %}{% if a_z %}<a href="{{ object.model.url }}AZ*{{ a_z }}">{{ object.model.verbose_name_plural|capfirst }}: {{ a_z }}</a>{% else %}
    <a href="{{ object.model.url }}">{{ object.model.verbose_name_plural|capfirst }}</a>{% endif %} / <span class="active">{{ object }}</span>
</p>
<h1>{{ object }}</h1>
{% include 'medd/data_dl.html' %}

{% for related_object in object.related_objects %}
    {% with related=related_object.object_list count=related_object.count %}
    {% if count %}<div class="related">
        <p>{{ related_object.model.verbose_name_plural }}{% if count > 1 %} <b class="badge">{{ count }}</b>{% endif %}
        {% if not related %}(too many to show)
        {% else %}<ul class="ls">
        {% for o in related %}
            {% if count > 30 %}
            {% ifchanged o.first_letter %}<li><b>{{ o.first_letter }}</b></li>{% endifchanged %}
            {% endif %}
            <li>{% if related_object.model.forward and not 'lookup' in object.url %}
                    {% with object=o %}{% include 'medd/data_dl.html' %}{% endwith %}
                {% else %}<a href="{{ o.url }}">{{ o }}</a>
                {% endif %}</li>
        {% endfor %}
        </ul>{% endif %}
    </div>{% endif %}
    {% endwith %}
{% endfor %}

<script src="/ad.js"></script>
{% include 'ad.html' %}

{% endblock %}